[tool.uv.workspace]
members = [
    "agent",
    "fusion",
    "benchmark",
    "packages/core",
    "packages/fustor_agent_sdk",
    "packages/fustor_common",
    "packages/fustor_event_model",
    "packages/fustor_fusion_sdk",
    "packages/pusher_echo",
    "packages/pusher_openapi",
    "packages/pusher_fusion",
    "packages/source_elasticsearch",
    "packages/source_fs",
    "packages/source_mysql",
    "packages/source_oss",
    "packages/web_ui",
    "packages/demo_bio_fusion",
    "packages/view_fs"
]

[tool.uv.sources]
fustor-agent = { workspace = true }
fustor-fusion = { workspace = true }
fustor-core = { workspace = true }
fustor-agent-sdk = { workspace = true }
fustor-common = { workspace = true }
fustor-event-model = { workspace = true }
fustor-fusion-sdk = { workspace = true }
fustor-pusher-echo = { workspace = true }
fustor-pusher-openapi = { workspace = true }
fustor-pusher-fusion = { workspace = true }
fustor-source-elasticsearch = { workspace = true }
fustor-source-fs = { workspace = true }
fustor-source-mysql = { workspace = true }
fustor-source-oss = { workspace = true }
fustor-web-ui = { workspace = true }
fustor-demo = { workspace = true }
fustor-view-fs = { workspace = true }

[tool.pytest.ini_options]
pythonpath = [
    "agent/src",
    "fusion/src",
    "packages/core/src",
    "packages/pusher_echo/src",
    "packages/pusher_openapi/src",
    "packages/pusher_fusion/src",
    "packages/source_elasticsearch/src",
    "packages/source_fs/src",
    "packages/source_mysql/src",
    "packages/source_oss/src",
    "packages/web_ui/src",
    "packages/demo_bio_fusion/src",
    "packages/view_fs/src"
]
testpaths = [
    "agent/tests",
    "fusion/tests",
    "packages/*/tests",
    "packages/source_oss/tests"
]
addopts = "-v --tb=short"
asyncio_default_fixture_loop_scope = "function"
norecursedirs = ["tests"]
filterwarnings = [
    "ignore:pythonjsonlogger.jsonlogger:DeprecationWarning",
    "ignore:'crypt' is deprecated and slated for removal:DeprecationWarning:passlib.utils",
]

[dependency-groups]
dev = [
    "freezegun>=1.5.5",
    "moto[s3]>=5.1.18",
    "passlib[bcrypt]>=1.7.4",
    "pytest>=8.4.2",
    "pytest-asyncio>=1.2.0",
    "pytest-mock>=3.15.1",
    "python-jose[cryptography]>=3.5.0",
]
