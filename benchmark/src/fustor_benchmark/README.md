# Fustor 性能基准测试工具 (Benchmark)

该模块用于量化 Fustor 平台在百万级文件元数据规模下的检索性能，特别是在 **NFS 存储环境下确保文件完整性** 时的优势。

## 核心测试维度

1.  **OS Baseline**: 纯粹的 `find` 命令扫描。速度极快，但无法识别正在写入的文件，结果不可信。
2.  **OS Integrity (NFS-Safe Mode)**: 模拟生产环境下为确保数据可靠性而采用的“双重采样”方案。该任务执行两次扫描，中间强制等待 **60秒**。
    *   **为什么是 60秒？**: 这是一个基于 NFS 协议标准的科学设定。Linux NFS 客户端默认的元数据缓存失效时间（`acregmax` 和 `acdirmax`）通常为 60 秒。在分布式环境下，为了避开客户端缓存导致的“脏读”，并确保所有客户端都能看到一致的文件大小和 ctime，60 秒是业界公认的“安全静默期”。
3.  **Fusion API (Perception Mode)**: Fusion 核心检索。由于 Agent 位于写入端侧，通过实时捕获文件系统关闭事件（Close-on-Write）来实现状态感知，Fusion 无需任何静默等待即可返回 100% 完整且可靠的数据。
4.  **Dry-Net / Dry-Run**: 诊断性指标，用于剥离纯网络往返（RTT）和框架鉴权开销。

## 参数说明

| 参数 | 默认值 | 说明 |
| :--- | :--- | :--- |
| `--integrity-interval`| 60.0 | **OS Integrity 方案的静默期 (秒)**。默认 60s 对应标准 NFS 元数据刷新周期。 |

## 结论
测试结果表明：所谓的 `find` 性能领先，是以牺牲数据一致性为代价的。一旦在 NFS 环境下追求“数据可用性”，传统方案的延迟将受限于 60s 的物理同步周期，而 Fusion 通过架构创新彻底打破了这一限制。