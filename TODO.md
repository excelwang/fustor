# Refactoring TODO List

- [x] **Remove Legacy Code in Fusion**
  - [x] Remove `fusion/src/fustor_fusion/in_memory_queue.py`
  - [x] Remove `fusion/src/fustor_fusion/queue_integration.py`
  - [x] Remove `fusion/src/fustor_fusion/processing_manager.py`
  - [x] Remove `fusion/src/fustor_fusion/runtime/datastore_event_manager.py`
  - [x] Remove `fusion/src/fustor_fusion/api/ingestion.py`
  - [x] Update `fusion/src/fustor_fusion/main.py` to remove legacy imports
  - [x] Update `fusion/src/fustor_fusion/api/views.py` (remove legacy deps)
  - [x] Update `fusion/src/fustor_fusion/api/consistency.py` (remove legacy deps)
  - [x] Update `fusion/src/fustor_fusion/api/pipe.py` (remove ingestion)
  - [x] Update `fusion/src/fustor_fusion/core/session_manager.py` (remove queue cleanup)
  - [x] Update tests (remove legacy tests, fix imports)
- [x] **Fix phases.py in Agent**
  - [x] Update `agent/src/fustor_agent/runtime/pipeline/phases.py` to handle batch send failures
- [x] **Add Deprecation Warning**
  - [x] Update `fusion/src/fustor_fusion/runtime/fusion_pipeline.py` to add `datastore_id` warning
- [x] **Verify**
  - [x] Run Fusion tests
  - [x] Run Agent tests
